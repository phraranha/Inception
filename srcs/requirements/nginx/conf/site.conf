server {
	listen						443 ssl;
	keepalive_timeout			70;
	root						/var/www/html;
	index						index.php index.htm;
	server_name					paranha.42.fr;

	ssl_certificate				/etc/nginx/ssl/nginx.crt;
	ssl_certificate_key			/etc/nginx/ssl/nginx.key;
	ssl_protocols				TLSv1.2 TLSv1.3;
	ssl_ciphers					ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384;
	ssl_prefer_server_ciphers	on;

	location / {
		try_files $uri $uri/ =404 /index.php?$args ;
	}

	location ~ \.php$ {
		include snippets/fastcgi-php.conf;
        fastcgi_pass wordpress:9000;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
	}    
	location ~ /\.ht {
		deny all;
	}
}

server {
	listen 80;
	server_name _;
	return 444;
}